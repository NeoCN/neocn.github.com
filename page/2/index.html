
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>DevX.Me</title>
  <meta name="author" content="小马">

  
  <meta name="description" content="这里是8个Java领域的牛人，他们创建了框架，产品，工具或者书籍，并将其捐献给Java社区，改变了Java编程方式。
P.S. 排序仅基于个人观点。 8. Tomcat &amp; Ant 创始人 James Duncan Davidson，在他作为软件工程师在Sun公司工作期间(1997- &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://NeoCN.github.com/page/2/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="DevX.Me" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19855289-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">DevX.Me</a></h1>
  
    <h2>My Coding Life!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Java/top-8-java-people-you-should-know.html">[译]8个你应该知道的Java领域的牛人</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-12T00:00:00+08:00" pubdate data-updated="true">Sep 12<span>th</span>, 2010</time>
        
         | <a href="/Java/top-8-java-people-you-should-know.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这里是8个Java领域的牛人，他们创建了框架，产品，工具或者书籍，并将其捐献给Java社区，改变了Java编程方式。
<strong>P.S.</strong> 排序仅基于个人观点。</p>

<p><strong>8. Tomcat &amp; Ant 创始人</strong>
<div class="mceTemp"><dl class="wp-caption alignleft" style="width: 160px;"> <dt class="wp-caption-dt"><img title="James Duncan Davidson" src="http://www.mkyong.com/wp-content/uploads/2010/08/James-Duncan-Davidson-150.png" alt="James Duncan Davidson" width="150" height="150" /></dt> </dl></div>
<span style="color: #ff0000;"><strong>James Duncan Davidson</strong></span>，在他作为软件工程师在Sun公司工作期间(1997-2001)，创建了Tomcat，一个基于Java的Web服务器，现在仍广泛应用于Java Web项目中，同时还有Ant，一个使用XML描述构建过程与依赖呃构建工具，现在仍是基于Java的Web项目构建的事实标准。</p>

<p><strong>相关链接：</strong>
<ol>
	<li><a href="http://twitter.com/duncan" target="_blank">James Duncan Davidson Twitter</a></li>
	<li><a href="http://en.wikipedia.org/wiki/James_Duncan_Davidson" target="_blank">James Duncan Davidson Wiki</a></li>
	<li><a href="http://blog.duncandavidson.com/about/" target="_blank">James Duncan Davidson personal blog</a></li>
	<li><a href="http://ant.apache.org/" target="_blank">Apache Ant</a></li>
	<li><a href="http://tomcat.apache.org/" target="_blank">Apache Tomcat</a></li>
</ol>
</div>
  
  
    <footer>
      <a rel="full-article" href="/Java/top-8-java-people-you-should-know.html">继续阅读 &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Java/drop-support-for-javase-5-in-ongoing-mojarra-2-1.html">Mojarra 2.1(JSF 2.1官方参考实现)将放弃支持JavaSE 5.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-17T00:00:00+08:00" pubdate data-updated="true">Aug 17<span>th</span>, 2010</time>
        
         | <a href="/Java/drop-support-for-javase-5-in-ongoing-mojarra-2-1.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Mojarra是Oracle(曾经是Sun)针对JSF标准的官方参考实现。</p>

<p>据悉，为使Mojarra的测试矩阵能够更符合Oracle目前的工程投资，针对即将到来的JSF 2.1标准的未来所有Mojarra构建将仅支持JavaSE 6.0及更新版本。所有2.0.x和1.2版本将仍然继续使用JavaSE 5.0构建。</p>

<p>原文链接：<a href="http://www.java.net/blog/edburns/archive/2010/08/16/decision-drop-support-javase-5-ongoing-oracle-mojarra-21-development">Decision: Drop support for JavaSE 5 in ongoing Oracle Mojarra 2.1 development efforts</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Java/google-has-acquired-instantiations.html">Google收购Instantiations</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-05T00:00:00+08:00" pubdate data-updated="true">Aug 5<span>th</span>, 2010</time>
        
         | <a href="/Java/google-has-acquired-instantiations.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>继谷歌上半年11亿美元收购22家公司之后，谷歌仍继续疯狂收购……<br />
最新消息，谷歌收购Instantiations，具体收购金额未知，Instantiations官方网站已放出声明：
<pre>We’re excited to announce that Instantiations is now part of Google!
Yes it’s true. Instantiations’ award-winning Java and Ajax development tools and our
incredible Eclipse team have been acquired by Google. We are all very excited about
taking our technology and team to the next level - and there is no bigger step up
than Google!
We very much appreciate your patronage and interest through the years. As part of
Google, we look forward to continuing to work with you. <span style="color: #008000;">Please stay tuned for exciting
new announcements coming soon on the Google Web Toolkit blog</span>.
Instantiations Java development products and people have a new home at  Google, but VA
Smalltalk™ is staying put - with the same people, same  products, and same dedication
to our customers and to Smalltalk.
</pre>
Instantiations主要产品为基于Eclipse的Java、SmallTalk商业开发工具，比如GWT/Swing/SWT/RCP Designer、Window Builder Pro、CodePro、Window Tester Pro等，Google此次收购，未包含SmallTalk产品线及相关开发团队。“新的”Instantiations公司继续保持独立，主要进行SmallTalk相关产品线相关业务，其原Java/AJAX开发工具产品线及开发团队将通过此次收购进入Google。</p>

<p>个人认为Google的主要目的在于该公司的GWT Designer，这将为GWT提供强大的可视化开发工具，而通过此次收购，Google不仅仅是收获了GWT Designer及其团队，更是得到了一个强大的可视化开发工具开发团队。难道你不期待或者希望有Android Designer吗？</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Java/http-417-expectation-failed-and-expect-100-continue.html">HTTP 417 Expectation Failed与Expect:100-Continue</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-21T00:00:00+08:00" pubdate data-updated="true">Jul 21<span>st</span>, 2010</time>
        
         | <a href="/Java/http-417-expectation-failed-and-expect-100-continue.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这两天写代码，调用新浪微博的Rest API，使用HttpClient 4.0，以Post方式提交，请求参数以UrlEncodedFormEntity的形式设置到HttpPost对象中，提交到API时，出现如下异常：
<pre lang="xml" escape="true">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;417 Expectation Failed&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Error 417 Expectation Failed&lt;/h1&gt;
        &lt;p&gt;Expectation Failed&lt;/p&gt;
        &lt;h3&gt;Guru Meditation:&lt;/h3&gt;
        &lt;p&gt;XID: 2734998565&lt;/p&gt;
        &lt;address&gt;
            &lt;a href="http://www.varnish-cache.org/"&gt;Varnish&lt;/a&gt;
        &lt;/address&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
<br />
刚开始有点莫名其妙，这是哪门子错误，没见过啊，于是去查HTTP状态字定义，得到如下描述：
<pre>
The expectation given in an Expect request-header field (see section 
14.20) could not be met by this server, or, if the server is a proxy,    
the server has unambiguous evidence that the request could not be met    
by the next-hop server.
</pre>
大致的意思是：
<pre>服务器不支持Expect请求头部域，或者，如果服务器是代理服务器的话，
服务器有明确的证据表明请求不能到达下一跳服务器。</pre>
<br />
那，到底什么是Expect请求头部域呢？以前完全没用过，也很少见，跟踪浏览器的HTTP请求的时候也很少见这个头部域，继续查吧，根据HTTP请求头部Expect域的定义，得到如下信息：
<pre>The Expect request-header field is used to indicate that particular
server behaviors are required by the client.
      Expect       =  "Expect" ":" 1#expectation
      expectation  =  "100-continue" | expectation-extension
      expectation-extension =  token [ "=" ( token | quoted-string )
                               *expect-params ]
      expect-params =  ";" token [ "=" ( token | quoted-string ) ]
A server that does not understand or is unable to comply with any of 
the expectation values in the Expect field of a request MUST respond
 with appropriate error status. The server MUST respond with a 
417(Expectation Failed) status if any of the expectations cannot be met 
or, if there are other problems with the request, some other 4xx status.
This header field is defined with extensible syntax to allow for 
future extensions. If a server receives a request containing an 
Expect field that includes an expectation-extension that it does not 
support, it MUST respond with a 417 (Expectation Failed) status.
Comparison of expectation values is case-insensitive for unquoted 
tokens (including the 100-continue token), and is case-sensitive for 
quoted-string expectation-extensions.
The Expect mechanism is hop-by-hop: that is, an HTTP/1.1 proxy MUST 
return a 417 (Expectation Failed) status if it receives a request 
with an expectation that it cannot meet. However, the Expect 
request-header itself is end-to-end; it MUST be forwarded if the 
request is forwarded.
Many older HTTP/1.0 and HTTP/1.1 applications do not understand the   
Expect header.</pre>
大致意思如下：
<pre>Expect请求头部域，用于指出客户端要求的特殊服务器行为。若服务器不能理解或者满足
Expect域中的任何期望值，则必须返回417(Expectation Failed)状态，或者如果请求
有其他问题，返回4xx状态。
这个头部域使用可扩展语法定义，以方便将来扩展。如果服务器收到包含Expect头部域的
请求且包含一个它不支持的期望值扩展，则必须返回417(Expectation Failed)状态。
期望值的比较，对于非引用符号(包括100-continue)是大小写无关的，对于引用字符串
的期望值扩展，则是大小写敏感的。
Expect域的机制是逐跳进行的，也就是说如果一个代理服务器收到包含不能满足的期望
的请求时，必须返回417(Expectation Failed)状态。而Expect请求头部域自身，
却是端到端的，如果请求被转发，则它也必须被转发。
很多旧的HTTP/1.0和HTTP/1.1应用不支持Expect头部。
</pre>
到这里，基本明白了为什么会出现这样的错误，说明代码最后生成的HTTP请求，包含了服务器不能处理的Expect头部，到底是什么？装上Wireshark，监听一下请求内容，发现出现异常时的请求中的Expect头部是这样的：<strong>Expect:100-Continue</strong>，难道是它引起的？继续查……
<br />
对于Expect:100-Continue，HttpClient的官方文档是这样描述的：
<pre>
The purpose of the Expect: 100-Continue handshake is to allow the client that 
is sending a request message with a request body to determine if the origin 
server is willing to accept the request (based on the request headers) before
 the client sends the request body.
Expect: 100-continue handshake should be used with caution, as it may cause
problems with HTTP servers and proxies that do not support HTTP/1.1 protocol.
</pre>
大意如下：
<pre>
Expect:100-Continue握手的目的，是为了允许客户端在发送请求内容之前，判断源服务器是否愿意接受
请求（基于请求头部）。
Expect:100-Continue握手需谨慎使用，因为遇到不支持HTTP/1.1协议的服务器或者代理时会引起问题。
</pre>
<br />
而HttpClient 4.0中，是否激活Expect:100-Continue，是由HTTP请求执行参数<strong>http.protocol.expect-continue</strong>来控制的，通过设置参数值为true或者false，可以相应的激活或者关闭Expect:100-Continue握手。注意，在HttpClient中，默认是激活的。<br />
HttpClient 4 中关闭Expect:100-Continue握手的代码如下：
<pre lang="java">
HttpPost httpPost = new HttpPost(url);
httpPost.getParams().setBooleanParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE,
false);
</pre>
关闭HttpClient中的Expect:100-Continue握手之后，再执行程序，顺利地通过微博API发出了一条消息。
<br />
总结：通过这次的问题解决，可以看出，对于HTTP协议不够熟悉，底层了解不够，同时没有认真阅读HttpClient开发文档。我想，现在从事软件开发行业的大部分人都或多或少有这样的问题，即忽视底层协议及原理的学习。真正的了解底层原理，借以开源代码及开发文档的辅助，这样才会能够实现快速、高效、稳定的程序开发。
<br />
<strong>参考文献：</strong>
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.1.1" target="_blank">100 Continue</a>
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3" target="_blank">Use of the 100 (Continue) Status</a>
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.20" target="_blank">Expect Header Field Definition</a>
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.18" target="_blank">417 Expectation Failed</a>
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616.html" target="_blank">Hypertext Transfer Protocol &#8211; HTTP/1.1 </a>
<a href="http://hc.apache.org/httpcomponents-client-4.0.1/tutorial/html/fundamentals.html" target="_blank">HttpClient Tutorial &#8211; 1. Fundamentals </a></p>

<p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Java/java-4-ever.html">Java 4-Ever</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-28T00:00:00+08:00" pubdate data-updated="true">Jun 28<span>th</span>, 2010</time>
        
         | <a href="/Java/java-4-ever.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><p style="text-align: left;">由JavaZone制作的恶搞微软.Net的小电影，影片通过叛逆小伙的成长历程描述了在微软帝国下Java所给人们带来的新思维和新方向，拍摄的非常具备专业水准。</p></p>

<p><p style="text-align: center;"><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="480" height="400" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="align" value="middle" /><param name="src" value="http://player.youku.com/player.php/sid/XMTg0NTczMTg0/v.swf" /><param name="quality" value="high" /><embed type="application/x-shockwave-flash" width="480" height="400" src="http://player.youku.com/player.php/sid/XMTg0NTczMTg0/v.swf" quality="high" align="middle"></embed></object></p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Application Server/reset-weblogic-admin-console-password.html">重置WebLogic管理控制台密码</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-14T00:00:00+08:00" pubdate data-updated="true">Jun 14<span>th</span>, 2010</time>
        
         | <a href="/Application Server/reset-weblogic-admin-console-password.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>1、关掉WebLogic；<br />
2、进入需要重置密码的域的security目录下(例如: $WL_HOME/user_projects/domains/base_domain/security)，备份DefaultAuthenticatorInit.ldift文件为DefaultAuthenticatorInit.ldift_old；<br />
3、命令行下，进入域的bin目录，运行setDomainEnv脚本，设置环境变量；<br />
4、在操作3之后，运行如下命令：</p>

<p><strong><span style="color: #00ff00;">java weblogic.security.utils.AdminAccount admin_user admin_pass .</span></strong></p>

<p><strong></strong>记得修改“admin_user”和“admin_pass”为你所需要的用户名和密码，并且，<span style="color: #ff0000;">不要忘了最后的那个“.”和前面的空格，是必须的，不然会报参数非法</span>；</p>

<p>5、运行4中的命令后, 文件“DefaultAuthenticatorInit.ldift”会被更新；<br />
6、进入域的AdminServer目录下，重命名data文件夹为data_old；<br />
7、进入域的AdminServer目录下的security子目录，备份boot.properties文件为boot.properties_old，同时修改原boot.properties文件中的username和password为你所需要的用户名和密码；<br />
7、运行域的startWebLogic脚本，启动WebLogic；<br />
8、现在，就可以用你设置的用户名和密码登录Console控制台了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Java/the-method-for-passing-arrays-para-to-oracle.html">Java调用Oracle存储过程传入数组参数的方法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-05-22T00:00:00+08:00" pubdate data-updated="true">May 22<span>nd</span>, 2010</time>
        
         | <a href="/Java/the-method-for-passing-arrays-para-to-oracle.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>周四的时候，修改我们系统的代码，应另外一个公司的要求，要修改我们系统调用他们公司的提供的存储过程的调用方式。修改前，是通过配置的数据库用户名和密码直接访问到他们的数据库，再调用存储过程；现在要修改成从我们的数据库中直接访问他们授权的存储过程。以前之所以通过用户名密码访问他们的数据库后再调用，是因为储过程的一个输入参数是数组类型的，传递数组参数的时候，Connection的类型一定要是OracleConnection的，当时只知道使用用户名密码直接通过JDBC访问Oracle，获取连接，再传递参数进去是没有问题的，其他的方式试了下不行，时间紧，也就没去折腾。正好这次又要改，而且不允许直接JDBC访问拿Connection了，系统部署在WebLogic上，必须从WebLogic的连接池中获取连接。</p>

<p>Java向Oracle传递数组参数的方法：
<pre>ArrayDescriptor arraydesc = ArrayDescriptor.createDescriptor
                                           (<em><code>sql_type_name</code></em>, <em><code>connection</code></em>);
//<em><code>sql_type_name </code></em><code>是</code><code>Oracle数据库</code>中定义的数组类型的名称
ARRAY array = new ARRAY(<em><code>arraydesc</code></em>, <em><code>connection</code></em>, <em><code>elements</code></em>);
//<em><code>elements</code></em><code>是</code><code>Java数组类型的对象
</code></pre>
这里的array对象，就可以在调用存储过程时作为数组参数传入。需注意的是，connection必须是Native Connection，如果connection是通过JDBC建立数据库连接并获取的，就不会有问题，但是如果是通过JNDI数据源获取的，就不行，因为从数据源获取的Connection是Native Connection的代理类，比如Tomcat中通过配置的JNDI数据源获取连接，连接类型是org.apache.commons.dbcp.PoolableConnection类型的；在WebLogic、JBoss等其他服务器中，得到的Connection类型又是不同的。</p>

<p>通过JNDI数据源获取连接的情况下，需要对获取到的连接进行一定的处理，获取到Native Connection。</p>

<p>如果项目中使用了Spring，那么，在使用JNDI数据源获取数据库连接的情况下，可以方便地通过Spring的NativeJdbcExtractor获取Native Connection。Spring中所包含的NativeJdbcExtractor实现有：C3P0NativeJdbcExtractor、CommonsDbcpNativeJdbcExtractor、JBossNativeJdbcExtractor、NativeJdbcExtractor、SimpleNativeJdbcExtractor、WebLogicNativeJdbcExtractor、WebSphereNativeJdbcExtractor、XAPoolNativeJdbcExtractor，根据应用部署环境的不同选择相应的NativeJdbcExtractor实现。</p>

<p>如果项目中没有使用Spring呢，大家可以去下载Spring的源码，找找这几个NativeJdbcExtractor的代码，参考一下就OK啦。 开源就是好嘛！</p>

<p>在成功获得Native Connection后，运行代码，却没有出现预期的成功调用的结果，而是抛出如下异常：</p>

<p><strong><em>java.lang.ClassCastException: oracle.jdbc.driver.T4CConnection cannot be cast to oracle.jdbc.OracleConnection</em></strong>
at oracle.sql.ArrayDescriptor.createDescriptor(ArrayDescriptor.java:149)<br />
at oracle.sql.ArrayDescriptor.createDescriptor(ArrayDescriptor.java:115)</p>

<p>搞到这里，我就糊涂了，我拿到了Native Connection了啊，你还要我怎样啊……心里那个郁闷啊……</p>

<p>郁闷归郁闷，还得抓点紧解决问题不是，结果又是一顿狂搜，还行，最终找到了解决方案：</p>

<p><strong>部署环境下，删除WEB-INF/lib目录下的Oracle数据库驱动！</strong></p>

<p>删除完毕，程序跑起来，果然这个异常没了……真TMD的不容易啊……感觉技术方面还是比较菜，需要多学习……</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Oracle/oracle-to_char-week-of-year.html">Oracle中使用to_char获取周次</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-05-08T00:00:00+08:00" pubdate data-updated="true">May 8<span>th</span>, 2010</time>
        
         | <a href="/Oracle/oracle-to_char-week-of-year.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>昨天，照惯例统计了移动系统的访问情况，也没仔细看就提交给移动方面了，大概20分钟后，移动那边的负责人电话就过来了：
<pre>移动负责人：你统计的是什么时候的访问情况？
我：本周啊！
移动负责人：这结果不对啊，我怎么可能本周只访问过2个系统而且只有一次呢？
           我自己记得就有很多次了，也绝对不止2个系统！
我：……这样啊，不好意思，我检查下看……</pre>
统计系统访问情况的脚本是我写的，用它统计都有半年多了，这是第一次客户提出质疑；以前自己发现过结果不太对劲，但认为是正常浮动，没管它……</p>

<p>仔细检查了下脚本，统计本周访问情况，选择条件中关于时间判断是这样写的：to_char(create_date,&#8217;ww&#8217;) = to_char(sysdate,&#8217;ww&#8217;)，难道是这里有问题？</p>

<p>先做做测试看看：
<pre lang="sql">select to_char(to_date('2010-5-6','yyyy-mm-dd'),'ww') from dual;               --结果是18
select t0_char(to_date('2010-5-7','yyyy-mm-dd'),'ww') from dual;               --结果是19</pre>
汗……统计本周访问情况应是统计2010-5-3～2010-5-7 ，但是，使用to_char函数的ww参数获取周数，5.6和5.7都不在一个值上，这哪里能统计出正确结果呢……暴寒……</p>

<p><strong>问题原因</strong>：
<pre>WW参数：一年中的周次（1～53），第一周为一年的第一天至第七天；
IW参数：一年中的周次（1～52或1～53），基于ISO标准；</pre>
而我们平时所说的某一周是第几周，基本都是指自然周的周次，也就是基于ISO标准的周次，我的统计脚本里却用WW，太汗了……基础知识啊，需要恶补……半年多了啊，今天才知道……呃！！！这半年多的统计数据有多少是对的呢？不敢想！罪过啊罪过</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Web/html-5-file-operation.html">HTML 5 中的文件操作</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-17T00:00:00+08:00" pubdate data-updated="true">Apr 17<span>th</span>, 2010</time>
        
         | <a href="/Web/html-5-file-operation.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Gmail的附件添加，已经支持拖拽操作，可以直接从文件系统中拖拽文件至Gmail附件区域，完成文件上传操作，并且支持多文件操作，如下图所示：</p>

<p><a href="http://www.devx.me/wp-content/uploads/2010/04/File-Drag-Drop.png"><img class="size-full wp-image-326 " title="GMail文件拖拽操作" src="http://www.devx.me/wp-content/uploads/2010/04/File-Drag-Drop.png" alt="GMail文件拖拽操作" /></a></p>

<p><a href="http://www.devx.me/wp-content/uploads/2010/04/File-Uploading.png"><img class="size-full wp-image-327 " title="GMail附件上传" src="http://www.devx.me/wp-content/uploads/2010/04/File-Uploading.png" alt="GMail附件上传" /></a></p>

<p>文件拖拽操作，在Firefox 3.6 和 Chrome 4.1中均被支持，IE 8中无效……同时，我们可以注意到，附件在上传前，我们已经可以获取到附件的一些更具体信息，比如文件大小，不需要任何的浏览器插件来支持。这些特性，是很多Web应用开发者所期待的，所需要的……</p>

<p>Google正在努力推进HTML 5 标准的应用和普及，而微软，看来又慢了一步……</p>

<p>Gmail的附件拖拽上传，正是基于HTML 5 的文件API所实现，提供了相当不错的用户体验；只是对于我们这些做企业应用的开发者来说，如何推动客户升级浏览器或者更换浏览器，成了一个大问题，国内的浏览器市场，IE6仍然占据着很大的份额，正所谓，死而不僵……而面对一个企业，想推进系统或者浏览器升级，也是个不小的挑战……</p>

<p>HTML 5 中我所感兴趣的文件操作特性：</p>

<p>1、多文件序列支持；</p>

<p>2、结合XMLHttpRequest，获取文件上传进度；</p>

<p>3、获取所选择文件的信息，包括名称、大小、MIME类型等；</p>

<p>4、文件拖放选择支持；</p>

<p>参考文档：</p>

<p>1、<a href="https://developer.mozilla.org/en/Using_files_from_web_applications">Using files from web applications</a></p>

<p>2、<a href="http://www.w3.org/TR/FileAPI/">File API</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/其他/remove-the-dot-net-framework-assistant-for-firefox.html">卸载Microsoft .NET Framework Assistant for Firefox</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-14T00:00:00+08:00" pubdate data-updated="true">Mar 14<span>th</span>, 2010</time>
        
         | <a href="/其他/remove-the-dot-net-framework-assistant-for-firefox.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近升级Firefox到3.6，部分插件出现了兼容问题：比如IE Tab，听说已经停止更新了，索性换用Core IE Tab；也卸载了不兼容的MediaWrap 插件，然后就突然发现一个名为<strong><span style="font-weight: normal;">Microsoft .</span><em><span style="font-weight: normal;"><span style="font-style: normal;">NET Framework  Assistant 1.0</span><span style="font-style: normal;">的</span></span></em><span style="font-weight: normal;">插件，无法卸载，且与Firefox 3.6不兼容……看着是相当的碍眼，可以肯定自己没装过这个插件，看来微软一贯的风格果然很牛B……</span></strong></p>

<p>官方共两种解决办法：</p>

<p>方案一、安装 <a href="http://www.microsoft.com/downloads/details.aspx?displaylang=zh-cn&amp;FamilyID=cecc62dc-96a7-4657-af91-6383ba034eab" target="_blank">用于 Firefox 的 .NET Framework Assistant 1.0 的 .NET Framework 3.5 SP1 更新</a>，然后即可正常卸载插件(如果已经安装了Firefox 3.6或者更高版本而且<strong>.NET  Framework Assistant 0.0.0</strong>已经出现在Firefox附加组件列表中，那么请使用方案二删除该插件)；</p>

<p>该更新的描述如下：在 .NET Framework 3.5 SP1 中，.NET Framework Assistant 使 Firefox 可以使用  .NET Framework 中所包含的 ClickOnce 技术。.NET Framework Assistant  是在计算机级别添加的，支持计算机的所有用户使用其功能。因而，<strong>Firefox  加载项列表中的“卸载”按钮显示为不可用，这是因为不允许标准用户卸载计算机级别的组件</strong>。在此 .NET Framework 3.5 SP1 更新和  Windows 7 中，将基于每个用户安装 .NET Framework Assistant。这样，<strong>Firefox  加载项列表中的“卸载”按钮将可用</strong>。此外，此更新还将使用于 Firefox 的此版本的 .NET Framework Assistant 与将来的  Firefox 浏览器版本兼容。  此更新还将使用于 Firefox 的此版本的 .NET Framework Assistant 与将来的 Firefox  浏览器版本兼容。为了正确地更新 .NET Framework Assistant，必须先在 Firefox  中启用该扩展，然后才能应用此更新。若要修正因在禁用该扩展时安装此更新所造成的后果，请卸载更新，重新启用该扩展，然后重新安装此更新。.NET  Framework Assistant 的更新可能包含用于 Firefox 的 Windows Presentation Foundation  插件，从而能够在首次更新时启用该扩展。</p>

<p>方案二、手动删除。
<ol>
	<li>删除注册表项为扩展。若要执行此操作，使用下列方法之一。
<ul>
	<li>使用注册表编辑器：
<ol>
	<li>使用具有 管理员权限的帐户登录。</li>
	<li>单击 <strong>开始</strong>、 单击 <strong>运行</strong>，键入 <strong>regedit</strong>，然后 按 ENTER 键。</li>
	<li>找到并单击以下注册表子项。<br />
对于基于 x86 的计算机：<br />
HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\Firefox\Extensions<br />
对于基于 x64 的计算机：<br />
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Mozilla\Firefox\Extensions</li>
	<li>删除 <strong>{20a82645-c095-46ed-80e3-08825760534b}</strong> 子项。</li>
</ol>
</li>
	<li>使用命令提示符：
<ol>
	<li>使用具有管理员权限的帐户登录。</li>
	<li>单击 <strong>开始</strong>，单击 <strong>运 行</strong>，键入 <strong>cmd</strong>，然后按 ENTER 键。</li>
	<li>命令提示符键入相应的命令，然后按 ENTER 键。<br />
对于基于 x86 的计算机：<br />
reg DELETE  /&#8221;HKLM\SOFTWARE\Mozilla\Firefox\Extensions&#8221;v&#8221;{20a82645-c095-46ed-80e3-08825760534b}&#8221;/  f<br />
对于基于 x64 的计算机<strong><span style="font-weight: normal;">：<br />
reg  DELETE&#8221;HKLM\SOFTWARE\Wow6432Node\Mozilla\Firefox\Extensions&#8221;/  v&#8221;{20a82645-c095-46ed-80e3-08825760534b}&#8221;/ f</span></strong></li>
</ol>
</li>
</ul>
</li>
	<li>在  Firefox 在用户代理重置您在步骤 1 中所做的更改。若要这样做，请按照下列步骤操作：
<ol>
	<li>启动  Firefox ，在 地址栏中输入about:config</li>
	<li>向下滚动，或者使用 <strong>过滤器</strong> 查找以下的首选项项目：
<div><strong>general.useragent.extra.microsoftdotnet</strong></div></li>
	<li>用鼠标右键单击此的项目，然后单击 <strong>重置</strong>。</li>
	<li>重新启动 Firefox</li>
</ol>
</li>
	<li>删除.Net 扩展文件。若要这样做，请按照下列步骤操作：
<ol>
	<li>使用具有管理员权限的帐户登录。</li>
	<li>单击 <strong>开始</strong>、  单击 <strong>运行</strong>，键入 <strong>explorer</strong>， 然后按 ENTER 键。</li>
	<li>打开以下文件夹：
<div>%SYSTEMDRIVE%\Windows\Microsoft.NET\Framework\v3.5\Windows Presentation Foundation\DotNetAssistantExtension\</div></li>
	<li>删除 DotNetAssistantExtension 文件夹及其所有内容</li>
</ol>
</li>
</ol>
原文链接：<a href="http://support.microsoft.com/kb/963707/en-us" target="_blank">How to remove the .NET Framework Assistant for Firefox</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/3/">&larr; Older</a>
    
    <a href="/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/其他/4-traps-a-startup-should-care.html">[转]4个造成创业失败的最重要陷阱</a>
      </li>
    
      <li class="post">
        <a href="/其他/twelve-principles-of-agile-software.html">敏捷软件的十二条原则</a>
      </li>
    
      <li class="post">
        <a href="/其他/stay-hungry-stay-foolish.html">Stay Hungry. Stay Foolish.</a>
      </li>
    
      <li class="post">
        <a href="/其他/how-to-start-a-startup.html">如何进行成功的创业</a>
      </li>
    
      <li class="post">
        <a href="/Android/hierarchyviewer-bat-is-missing-from-android-sdk_r07-windows.html">Windows版本的Android SDK R07中缺少hierarchyviewer.bat文件</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - 小马 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'devx_me';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
